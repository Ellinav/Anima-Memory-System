:root {
  --anima-bg-main: #111827;
  --anima-bg-sidebar: #1f2937;
  --anima-bg-card: rgba(255, 255, 255, 0.03);
  --anima-bg-input: rgba(0, 0, 0, 0.2);
  --anima-border: #374151;
  --anima-primary: #10b981;
  --anima-primary-hover: #059669;
  --anima-text-main: #f9fafb;
  --anima-text-sub: #9ca3af;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

/* 1. ä¿®å¤ï¼šä½¿ç”¨ vw/vh å¼ºåˆ¶æ’‘æ»¡å±å¹•ï¼Œè§£å†³ç¼©æ”¾å˜æˆâ€œä¸€æ¡â€çš„é—®é¢˜ */
#anima-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 20000;
  background-color: rgba(17, 24, 39, 0.98);
  backdrop-filter: blur(5px);
  display: flex;
  flex-direction: column;
  font-family:
    "Inter",
    system-ui,
    -apple-system,
    sans-serif;
  color: var(--anima-text-main);
  box-sizing: border-box; /* ç¡®ä¿ padding ä¸ä¼šæ’‘ç ´å¸ƒå±€ */
}

/* å…¨å±€éšè—ç±» */
.anima-hidden {
  display: none !important;
}

/* é¡¶éƒ¨æ  */
.anima-header-bar {
  height: 60px;
  flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
  border-bottom: 1px solid var(--anima-border);
  display: flex;
  align-items: center;
  padding: 0 24px;
  justify-content: space-between;
  background-color: var(--anima-bg-sidebar);
}

.anima-brand {
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 16px;
  user-select: none;
}

#anima-toggle-sidebar,
#anima-close-btn {
  cursor: pointer;
  padding: 8px;
  border-radius: 6px;
  color: var(--anima-text-sub);
  transition: background 0.2s;
}
#anima-toggle-sidebar:hover,
#anima-close-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--anima-text-main);
}

/* ä¸»ä½“åŒºåŸŸ */
.anima-main-layout {
  flex: 1; /* è‡ªåŠ¨å æ»¡å‰©ä½™é«˜åº¦ */
  display: flex;
  overflow: hidden; /* é˜²æ­¢æº¢å‡º */
  position: relative;
  width: 100%;
  height: 100%; /* ç¡®ä¿å­å…ƒç´ èƒ½ç»§æ‰¿é«˜åº¦ */
}

/* å·¦ä¾§ä¾§è¾¹æ  */
.anima-sidebar {
  width: 240px;
  background-color: var(--anima-bg-sidebar);
  border-right: 1px solid var(--anima-border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  padding-top: 20px;

  /* 3. ä¿®å¤ï¼šä¾§è¾¹æ åŠ¨ç”»ä¼˜åŒ– */
  transition: width 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden; /* å…³é”®ï¼šéšè—è¶…å‡ºçš„å†…å®¹ */
  white-space: nowrap; /* å…³é”®ï¼šé˜²æ­¢æ–‡å­—æ¢è¡Œ/æŒ¤å‹ */
}

/* æŠ˜å çŠ¶æ€ */
.anima-sidebar.collapsed {
  width: 0; /* å½»åº•éšè— */
  border: none;
}

.anima-nav-item {
  padding: 14px 24px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: background 0.2s;
  font-size: 14px;
  color: var(--anima-text-sub);
  display: flex;
  align-items: center;
  gap: 12px;

  /* ç¡®ä¿æ–‡å­—ä¸ä¼šå› ä¸ºå®½åº¦å˜åŒ–è€Œè·³åŠ¨ */
  overflow: hidden;
}

.anima-nav-item:hover {
  background-color: rgba(255, 255, 255, 0.03);
  color: var(--anima-text-main);
}

.anima-nav-item.active {
  background-color: rgba(16, 185, 129, 0.1);
  border-left-color: var(--anima-primary);
  color: var(--anima-primary);
  font-weight: 600;
}

/* å³ä¾§å†…å®¹åŒº */
.anima-content-area {
  flex-grow: 1;
  padding: 40px;
  overflow-y: auto;
  width: 100%;
  /* å¢åŠ å¹³æ»‘æ»šåŠ¨ */
  scroll-behavior: smooth;
}

/* 2. ä¿®å¤ï¼šæ ‡ç­¾é¡µæ˜¾ç¤ºé€»è¾‘ */
/* é»˜è®¤éšè—æ‰€æœ‰ tab */
.anima-tab-content {
  display: none !important; /* å¼ºåˆ¶éšè— */
  max-width: 900px;
  margin: 0 auto;
  animation: fadeIn 0.3s ease;
}

/* åªæœ‰å¸¦ active ç±»çš„æ‰æ˜¾ç¤º */
.anima-tab-content.active {
  display: block !important; /* å¼ºåˆ¶æ˜¾ç¤º */
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- ä»¥ä¸‹æ˜¯ç»„ä»¶æ ·å¼ï¼Œä¿æŒåŸæ · --- */
.anima-title {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 8px;
  color: var(--anima-text-main);
}
.anima-subtitle {
  color: var(--anima-text-sub);
  font-size: 14px;
  margin-bottom: 30px;
}
.anima-card {
  background: var(--anima-bg-card);
  border: 1px solid var(--anima-border);
  border-radius: 12px;
  padding: 24px;
  margin-bottom: 24px;
}
.anima-input,
.anima-textarea,
.anima-select {
  width: 100%;
  background-color: var(--anima-bg-input);
  border: 1px solid var(--anima-border);
  color: var(--anima-text-main);
  padding: 12px 16px;
  border-radius: 8px;
  margin-bottom: 16px;
  font-size: 14px;
  box-sizing: border-box; /* é˜²æ­¢ padding æ’‘å¤§å®½åº¦ */
}
.anima-input:focus,
.anima-textarea:focus,
.anima-select:focus {
  outline: none;
  border-color: var(--anima-primary);
}
.anima-btn {
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;
  border: 1px solid transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.anima-btn.primary {
  background-color: var(--anima-primary);
  color: #fff;
}
.anima-btn.primary:hover {
  background-color: var(--anima-primary-hover);
}
.anima-btn.secondary {
  background-color: transparent;
  border-color: var(--anima-border);
  color: var(--anima-text-main);
}
.anima-btn.secondary:hover {
  background-color: rgba(255, 255, 255, 0.05);
}
.anima-btn.danger {
  background-color: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

/* è¡¨æ ¼æ ·å¼ */
.anima-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 14px;
}
.anima-table th {
  text-align: left;
  padding: 12px 16px;
  color: var(--anima-text-sub);
  border-bottom: 1px solid var(--anima-border);
}
.anima-table td {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

/* æ‰‹æœºé€‚é… */
@media (max-width: 768px) {
  .anima-sidebar {
    position: absolute;
    height: 100%;
    z-index: 50;
    box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
  }
  .anima-sidebar.collapsed {
    width: 0;
    transform: translateX(-10px); /* ç¨å¾®ç§»å‡ºä¸€ç‚¹ç¡®ä¿é˜´å½±æ¶ˆå¤± */
  }
  .anima-content-area {
    padding: 20px;
  }
}
/* è¾“å…¥æ¡†ç»„ï¼šè®©è¾“å…¥æ¡†å’ŒæŒ‰é’®å¹¶æ’ */
.anima-input-group {
  display: flex;
  gap: 8px;
  width: 100%;
  margin-bottom: 16px;
}

.anima-input-group .anima-input,
.anima-input-group .anima-select {
  margin-bottom: 0; /* ç§»é™¤åŸæœ¬çš„ marginï¼Œäº¤ç»™ group æ§åˆ¶ */
  flex-grow: 1;
}

.anima-icon-btn {
  flex-shrink: 0;
  width: 42px;
  height: 42px; /* å’Œè¾“å…¥æ¡†ç­‰é«˜ */
  background-color: var(--anima-bg-input);
  border: 1px solid var(--anima-border);
  color: var(--anima-text-sub);
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.anima-icon-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--anima-text-main);
  border-color: var(--anima-primary);
}

/* ç®€å•çš„åˆ†å‰²çº¿æ ‡é¢˜ */
.anima-divider-title {
  font-size: 12px;
  color: var(--anima-text-sub);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 24px 0 12px 0;
  border-bottom: 1px solid var(--anima-border);
  padding-bottom: 5px;
}

/* Summaryéƒ¨åˆ† */
/* åŸºç¡€å¸ƒå±€ */
.anima-setting-group {
  margin-bottom: 20px;
}
.anima-title {
  font-size: 1.2em;
  font-weight: bold;
  margin-bottom: 10px;
  padding-bottom: 5px;
}
.anima-card {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--smart-theme-border-color, #444);
  border-radius: 8px;
  padding: 15px;
}

.anima-flex-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  gap: 15px;
}
.anima-label-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.anima-label-text {
  font-weight: 600;
  font-size: 14px;
}
.anima-desc-inline {
  font-size: 12px;
  color: var(--smart-theme-body-color-muted, #9ca3af);
  opacity: 0.8;
  margin-top: 2px;
}
.anima-input-wrapper {
  width: 100px;
  flex-shrink: 0;
}
.anima-input-wrapper .anima-input {
  margin-bottom: 0;
  text-align: center;
}

/* ğŸ”´ æ­£åˆ™æ¨¡å—æ ·å¼ */
.anima-regex-add-row {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  align-items: center;
}
.anima-regex-add-row .anima-input {
  flex: 1;
  margin: 0;
  font-family: monospace;
}
.anima-regex-list {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  padding: 10px;
  min-height: 40px;
  margin-bottom: 15px;
}

.anima-regex-item {
  display: flex;
  flex-direction: column; /* é»˜è®¤å‚ç›´æ’åˆ— (ç”¨äº Prompt åˆ—è¡¨) */
  gap: 5px;
  background: var(--smart-theme-bg, #202b3b);
  border: 1px solid var(--smart-theme-border-color, #444);
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 8px;
  font-family: monospace;
  font-size: 13px;
  position: relative;
}

.anima-tag.primary {
  background-color: var(--anima-primary);
}

.anima-tag.danger {
  background-color: #ef4444;
}

.anima-regex-item.is-row {
  flex-direction: row; /* å¼ºåˆ¶æ¨ªå‘ */
  justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
  align-items: center; /* å‚ç›´å±…ä¸­ */
}

.anima-regex-item.is-row span {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-right: 10px;
}

.edit-mode .anima-select,
.edit-mode .anima-input {
  padding: 4px 8px;
  height: 30px;
  font-size: 13px;
}

/* ğŸ”µ æç¤ºè¯æ¨¡å—æ ·å¼ */
.anima-prompt-container {
  margin-top: 10px;
}
#anima_summary_prompt {
  width: 100%;
  min-height: 120px;
  font-family: monospace;
  line-height: 1.4;
  padding: 10px;
  resize: vertical;
  margin-top: 5px;
}

/* --- ä¿®å¤ç‚¹ 1ï¼šContext æ¡ç›®å¸ƒå±€ --- */
.anima-context-item {
  background: rgba(100, 149, 237, 0.15);
  border: 1px dashed var(--smart-theme-border-color, #444);
  color: var(--smart-text-color, #ccc);
  padding: 10px 15px; /* è°ƒæ•´å†…è¾¹è· */
  font-weight: bold;
  cursor: grab;

  /* å…³é”® Flex ä¿®å¤ */
  display: flex;
  flex-direction: row; /* å¼ºåˆ¶æ¨ªå‘æ’åˆ— */
  align-items: center; /* å‚ç›´å±…ä¸­ */
  justify-content: flex-start; /* å·¦å¯¹é½ */
  gap: 15px; /* å›¾æ ‡å’Œæ–‡å­—é—´è· */
}

.anima-context-text {
  flex: 1;
  text-align: left; /* æ–‡å­—å·¦å¯¹é½ */
  opacity: 0.9;
}
.anima-context-item:active {
  cursor: grabbing;
}

/* --- ä¿®å¤ç‚¹ 2ï¼šæ‹–æ‹½æ‰‹æŸ„ä¸ä¸‹æ‹‰æ¡†å¯¹é½ --- */
.anima-drag-handle {
  cursor: grab;
  color: #666;
  padding: 0 5px;
  font-size: 14px;
  display: flex; /* ç¡®ä¿å›¾æ ‡å®¹å™¨ä¹Ÿæ˜¯ flex */
  align-items: center; /* ç¡®ä¿å›¾æ ‡å‚ç›´å±…ä¸­ */
  height: 100%;
}
.anima-drag-handle:hover {
  color: #ccc;
}
.anima-regex-item:active .anima-drag-handle {
  cursor: grabbing;
}

/* å¼ºåˆ¶ä¸‹æ‹‰æ¡†å‚ç›´å±…ä¸­ï¼Œä¿®æ­£é«˜åº¦ */
.role-select {
  margin: 0 !important;
  height: 30px !important; /* å¼ºåˆ¶é«˜åº¦ä¸å°æŒ‰é’®ä¸€è‡´ */
  line-height: normal;
  padding: 0 5px;
}

/* ğŸŸ¢ æ‰‹åŠ¨åŒºåŸŸæ ·å¼ */
.anima-manual-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 15px;
}
.anima-manual-input-group {
  display: flex;
  flex-direction: column;
}
.anima-manual-input-group label {
  font-size: 12px;
  margin-bottom: 5px;
  font-weight: bold;
}

/* åˆ†å‰²çº¿ä¸æŒ‰é’® */
.anima-divider {
  height: 1px;
  background-color: var(--smart-theme-border-color, rgba(255, 255, 255, 0.1));
  margin: 20px 0;
}
.anima-btn-group {
  display: flex;
  gap: 10px;
  align-items: center;
  width: 100%;
  margin-top: 10px;
  flex-wrap: wrap;
}
.anima-btn.small {
  padding: 4px 10px;
  font-size: 12px;
  height: 30px; /* ç»Ÿä¸€æ ·å¼ */
}

/* æ¨¡æ€æ¡† */
.anima-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(2px);
  z-index: 20001;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}
.anima-modal:not(.hidden) {
  opacity: 1;
  pointer-events: auto;
}
.anima-modal-content {
  background-color: var(--smart-theme-bg, #1f2937);
  border: 1px solid var(--smart-theme-border-color, #374151);
  border-radius: 12px;
  width: 90%;
  max-width: 700px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  padding-bottom: 10px; /* åº•éƒ¨ç•™ç‚¹ç™½ï¼Œå› ä¸º footer æ²¡äº† */
}
.anima-modal-header {
  padding: 16px 24px;
  border-bottom: 1px solid
    var(--smart-theme-border-color, rgba(255, 255, 255, 0.1));
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  font-size: 16px;
}
.anima-close-modal {
  cursor: pointer;
  font-size: 20px;
  opacity: 0.7;
}
.anima-close-modal:hover {
  opacity: 1;
}
.anima-modal-body {
  padding: 24px;
  overflow-y: auto;
  font-size: 14px;
  line-height: 1.5;
}
.anima-modal-footer {
  padding: 16px 24px;
  border-top: 1px solid
    var(--smart-theme-border-color, rgba(255, 255, 255, 0.1));
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

/* é¢„è§ˆå†…å®¹çš„æ ·å¼ */
.anima-preview-box {
  background: rgba(0, 0, 0, 0.2);
  padding: 15px;
  border: 1px solid var(--smart-theme-border-color, #444);
  border-radius: 6px;
  max-height: 400px;
  overflow-y: auto;
  font-family: monospace;
  font-size: 12px;
  white-space: pre-wrap;
}

/* å†å²è®°å½•åˆ—è¡¨æ ·å¼ */
.anima-history-entry {
  border: 1px solid var(--smart-theme-border-color, #444);
  background: rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  margin-bottom: 12px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.anima-history-header {
  background: rgba(0, 0, 0, 0.2);
  padding: 8px 12px;
  border-bottom: 1px solid var(--smart-theme-border-color, #444);
  display: flex;
  justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
  align-items: center;
}

.anima-history-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  font-family: monospace;
  color: #ccc;
}

.anima-meta-tag {
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: bold;
}

.anima-meta-tag.entry-name {
  color: #60a5fa;
} /* è“è‰² */
.anima-meta-tag.index-num {
  color: #facc15;
} /* é»„è‰² */
.anima-meta-tag.range-num {
  color: #4ade80;
} /* ç»¿è‰² */

.anima-history-actions {
  display: flex;
  gap: 8px;
}

/* å†…å®¹åŒºåŸŸï¼šé»˜è®¤æŠ˜å çŠ¶æ€ */
.anima-history-content {
  padding: 12px;
  font-family: monospace;
  font-size: 12px;
  white-space: pre-wrap;
  color: var(--smart-text-color, #ccc);
  line-height: 1.5;

  /* ğŸ”´ æŠ˜å æ ¸å¿ƒæ ·å¼ */
  max-height: 60px; /* é»˜è®¤åªæ˜¾ç¤ºçº¦ 3 è¡Œ */
  overflow: hidden;
  cursor: pointer; /* æç¤ºå¯ç‚¹å‡» */
  position: relative;
  transition: max-height 0.2s;

  /* åº•éƒ¨æ¸å˜é®ç½©ï¼Œæç¤ºè¿˜æœ‰å†…å®¹ */
  -webkit-mask-image: linear-gradient(180deg, #000 60%, transparent);
  mask-image: linear-gradient(180deg, #000 60%, transparent);
}

/* æ‚¬åœæ—¶ç¨å¾®é«˜äº®ä¸€ä¸‹ï¼Œæç¤ºäº¤äº’ */
.anima-history-content:hover {
  background: rgba(255, 255, 255, 0.02);
}

/* ğŸŸ¢ å±•å¼€çŠ¶æ€ */
.anima-history-content.expanded {
  max-height: none; /* å–æ¶ˆé«˜åº¦é™åˆ¶ */
  -webkit-mask-image: none;
  mask-image: none;
}

/* ğŸ”µ ç¼–è¾‘çŠ¶æ€ */
.anima-history-content.editing {
  max-height: none;
  -webkit-mask-image: none;
  mask-image: none;
  cursor: default; /* ç¼–è¾‘æ—¶å–æ¶ˆæ‰‹å‹ */
  padding: 0; /* ç»™ textarea è®©ä½ */
  background: transparent;
}

/* ç¼–è¾‘æ—¶çš„æ–‡æœ¬åŸŸ */
.anima-edit-textarea {
  width: 100%;
  min-height: 150px;
  background: rgba(0, 0, 0, 0.3);
  color: var(--smart-text-color, #ccc);
  border: 1px solid var(--smart-theme-border-color, #555);
  border-radius: 4px;
  padding: 10px;
  font-family: monospace;
  font-size: 12px;
  line-height: 1.5;
  resize: vertical;
  outline: none;
}
.anima-edit-textarea:focus {
  border-color: var(--smart-theme-primary, #60a5fa);
}

/* æŒ‰é’®ç»„æ˜¾éšæ§åˆ¶ */
.actions-normal,
.actions-editing {
  display: flex;
  gap: 8px;
}
/* é»˜è®¤éšè—ç¼–è¾‘ç»„ */
.actions-editing {
  display: none;
}

.anima-tag {
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
  color: white;
  white-space: nowrap;
}

/* å®¹å™¨ï¼šç›¸å¯¹å®šä½ï¼Œæ§åˆ¶å®½é«˜ */
.anima-switch {
  position: relative;
  display: inline-block;
  width: 44px; /* å®½åº¦ */
  height: 24px; /* é«˜åº¦ */
  flex-shrink: 0;
}

/* éšè—åŸæœ¬çš„ checkbox */
.anima-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* æ»‘å—è½¨é“ */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--anima-bg-input); /* é»˜è®¤ç°è‰²èƒŒæ™¯ */
  transition: 0.4s;
  border: 1px solid var(--anima-border);
}

/* æ»‘å—åœ†é’® */
.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 2px;
  bottom: 2px; /* å±…ä¸­å¾®è°ƒ */
  background-color: var(--anima-text-sub);
  transition: 0.4s;
}

/* é€‰ä¸­çŠ¶æ€ï¼šè½¨é“å˜è‰² */
input:checked + .slider {
  background-color: var(--anima-primary); /* æ¿€æ´»è‰² (ç»¿è‰²) */
  border-color: var(--anima-primary);
}

/* é€‰ä¸­çŠ¶æ€ï¼šåœ†é’®å˜è‰²/ç§»åŠ¨ */
input:checked + .slider:before {
  transform: translateX(20px);
  background-color: #fff;
}

/* åœ†è§’æ ·å¼ */
.slider.round {
  border-radius: 24px;
}

.slider.round:before {
  border-radius: 50%;
}

/* === 1. ä¿®æ”¹ã€æ‰§è¡Œæ€»ç»“ã€‘æŒ‰é’® (æ”¹ä¸ºæ˜¾çœ¼çš„è“è‰²) === */
#anima-btn-manual-run {
  background-color: #982ac4 !important; /* é²œè‰³è“ */
  color: #ffffff !important;
  border: none;
}
#anima-btn-manual-run:hover #btn-test-zod-rules:hover {
  background-color: #6f218e !important; /* æ·±è“ hover */
}

/* === 2. ä¿®æ”¹ã€å®æ—¶é¢„è§ˆã€‘å’Œã€å†å²æ¥¼å±‚ç®¡ç†ã€‘æŒ‰é’® (æ”¹ä¸ºå®å¿ƒç°/è“ç°è‰²ï¼Œä¸å†é€æ˜) === */
#anima-btn-view-history,
#rag_btn_last_result,
#btn-sync-status,
#rag_btn_kb_import {
  background-color: #2563eb !important; /* å®å¿ƒæ·±ç°èƒŒæ™¯ */
  color: #ffffff !important;
  border: none;
}

#anima-btn-view-history:hover,
#rag_btn_last_result:hover,
#btn-sync-status:hover,
#rag_btn_kb_import:hover {
  background-color: #1d4ed8 !important; /* é¼ æ ‡æ‚¬åœå˜æ·± */
}

#anima-btn-manual-preview,
#anima-btn-simulate-trigger,
#rag_btn_preview_query,
#rag_btn_status,
#btn-preview-status-prompt,
#rag_btn_kb_view {
  background-color: #b97f1c !important; /* å®å¿ƒæ·±ç°èƒŒæ™¯ */
  color: #ffffff !important;
  border: none;
}

#anima-btn-manual-preview:hover,
#anima-btn-simulate-trigger:hover,
#rag_btn_preview_query:hover,
#rag_btn_status:hover,
#btn-preview-status-prompt:hover,
#rag_btn_kb_view:hover {
  background-color: #97691a !important; /* é¼ æ ‡æ‚¬åœå˜æ·± */
}

#rag_btn_holidays {
  background-color: #c34620 !important; /* å®å¿ƒæ·±ç°èƒŒæ™¯ */
  color: #ffffff !important;
  border: none;
}
#rag_btn_holidays:hover {
  background-color: #a43d1d !important; /* é¼ æ ‡æ‚¬åœå˜æ·± */
}

/* =========================================================
   Status é¡µé¢æŒ‰é’®é¢œè‰²è‡ªå®šä¹‰ä¿®å¤
   ========================================================= */

/* 1. å†å²çŠ¶æ€ -ã€é€‰æ‹©æ¥¼å±‚ã€‘ (é»„è‰²) */
#btn-open-history-modal {
  background-color: #b97f1c !important; /* å®å¿ƒæ·±é»„/ç¥ç€è‰² */
  color: #ffffff !important;
  border: none !important;
}
#btn-open-history-modal:hover {
  background-color: #97691a !important; /* æ‚¬åœå˜æ·± */
}

/* 2. è¾“å‡ºæ ¡éªŒ -ã€æµ‹è¯•è§„åˆ™ã€‘ (ç´«è‰²) */
/* ä¿®æ­£ï¼šç›´æ¥ç”¨ ID é€‰æ‹©ï¼Œä¸è¦åŠ çˆ¶çº§ ID */
#btn_generic_merge,
#btn-test-zod-rules {
  background-color: #982ac4 !important; /* é²œè‰³ç´« */
  color: #ffffff !important;
  border: none !important;
}
#btn_generic_merge:hover,
#btn-test-zod-rules:hover {
  background-color: #6f218e !important; /* æ‚¬åœå˜æ·± */
}

/* 3. æ­£åˆ™æ„å»º -ã€æ·»åŠ æ­£åˆ™ã€‘ (ç»¿è‰²) */
/* è¿™é‡Œç›´æ¥å¼•ç”¨ä½ ç³»ç»Ÿé‡Œå®šä¹‰çš„ Primary å˜é‡ï¼Œä¿æŒå’Œä¿å­˜æŒ‰é’®ä¸€è‡´ */
#btn-add-status-regex {
  background-color: var(--anima-primary) !important; /* #10b981 */
  color: #ffffff !important;
  border: none !important;
}
#btn-add-status-regex:hover {
  background-color: var(--anima-primary-hover) !important; /* #059669 */
}

/* 4. æç¤ºè¯æ„å»º -ã€é¢„è§ˆ Payloadã€‘ (é»„è‰²) */
/* ä¿®æ­£ï¼šç›´æ¥ç”¨ ID é€‰æ‹© */
#btn-preview-status-prompt {
  background-color: #b97f1c !important; /* å®å¿ƒæ·±é»„/ç¥ç€è‰² */
  color: #ffffff !important;
  border: none !important;
}
#btn-preview-status-prompt:hover {
  background-color: #97691a !important; /* æ‚¬åœå˜æ·± */
}

/* =========================================================
   6. ä¿®å¤ï¼šæ‚¬æµ®åŒæ­¥æŒ‰é’®æ ·å¼ä¸ç§»åŠ¨ç«¯é€‚é…
   ========================================================= */
#anima-floating-sync-btn {
  /* é»˜è®¤éšè—ï¼ŒJS é€»è¾‘ä¼šé€šè¿‡å†…è” display:flex æ¥æ˜¾ç¤ºå®ƒï¼Œä¼˜å…ˆçº§é«˜äºæ­¤ */
  display: none;

  position: fixed;
  /* æé«˜å±‚çº§ï¼Œç¡®ä¿åœ¨æœ€ä¸Šå±‚ (STç§»åŠ¨ç«¯æœ‰äº›å±‚çº§å¾ˆé«˜) */
  z-index: 20002;

  /* === æ ¸å¿ƒä½ç½®é…ç½® (PCç«¯é»˜è®¤) === */
  /* ä¸è¦åŠ  !importantï¼Œå¦åˆ™ JS æ‹–åŠ¨åŠŸèƒ½(è®¾ç½® bottom:auto) ä¼šå¤±æ•ˆ */
  bottom: 80px;
  right: 20px;

  width: 40px;
  height: 40px;
  border-radius: 50%;

  background: var(--anima-warning, #f59e0b);
  color: white;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  cursor: grab;

  /* Flex å±…ä¸­å›¾æ ‡ */
  align-items: center;
  justify-content: center;
  font-size: 18px;

  transition:
    opacity 0.3s ease,
    transform 0.1s;
  user-select: none;
}

/* é¼ æ ‡äº¤äº’æ•ˆæœ */
#anima-floating-sync-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.1);
}

#anima-floating-sync-btn:active {
  transform: scale(0.95);
  cursor: grabbing;
}

/* === æ‰‹æœºç«¯é€‚é… === */
@media (max-width: 768px) {
  #anima-floating-sync-btn {
    /* 1. å…³é”®ï¼šç¦æ­¢æµè§ˆå™¨é»˜è®¤æ‰‹åŠ¿ (å¦‚é•¿æŒ‰æ”¾å¤§ã€æ»šåŠ¨)ï¼Œå®Œå…¨äº¤ç»™ JS å¤„ç† */
    touch-action: none;

    /* 2. ç§»é™¤ !importantï¼Œå…è®¸ JS æ‹–åŠ¨æ—¶ä¿®æ”¹ top/left */
    bottom: auto;
    top: 120px;
    right: 15px;
    left: auto; /* é‡ç½® leftï¼Œé˜²æ­¢ PC ç«¯æ ·å¼å¹²æ‰° */

    /* 3. æ‰‹æœºæ ·å¼ */
    width: 45px;
    height: 45px;
    font-size: 20px;
    z-index: 20002;
  }
}

/* è¾…åŠ©å·¥å…·é¡µé¢ */
#anima_btn_upload_json {
  background-color: #982ac4 !important; /* é²œè‰³ç´« */
  color: #ffffff !important;
  border: none;
  transition: background-color 0.2s;
}
#anima_btn_upload_json:hover {
  background-color: #6f218e !important;
}

/* è½¬æ¢æŒ‰é’®ï¼šç»¿è‰² (é»˜è®¤ç¦ç”¨çŠ¶æ€åœ¨JSé‡Œæ§åˆ¶é€æ˜åº¦ï¼Œè¿™é‡Œå†™åŸºç¡€è‰²) */
#anima_btn_convert_json {
  background-color: #10b981 !important;
  color: #ffffff !important;
  border: none;
  transition: background-color 0.2s;
}
#anima_btn_convert_json:hover {
  background-color: #059669 !important;
}
/* ç¦ç”¨æ—¶çš„æ ·å¼è¦†ç›– */
#anima_btn_convert_json:disabled {
  background-color: #3f3f46 !important; /* æ·±ç°è‰² */
  color: #a1a1aa !important;
  cursor: not-allowed;
  opacity: 0.7;
}

/* æ–‡ä»¶åˆ—è¡¨å®¹å™¨ */
.anima-file-list-box {
  margin-top: 15px;
  max-height: 200px;
  overflow-y: auto;
  background-color: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--anima-border, #444); /* ä½¿ç”¨ä½ çš„å…¨å±€å˜é‡ï¼Œæ²¡æœ‰å°±å›é€€#444 */
  border-radius: 6px;
  padding: 5px;
  display: none; /* é»˜è®¤éšè— */
}

/* å•ä¸ªæ–‡ä»¶è¡Œ */
.anima-file-item {
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.9em;
  color: var(--smart-text-color, #ccc);
}
.anima-file-item:last-child {
  border-bottom: none;
}
